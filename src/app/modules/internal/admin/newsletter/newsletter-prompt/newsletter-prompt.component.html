<div class="container d-flex align-items-center pt-3 flex-column">
  <h2 class="text-center mb-4">
    Utwórz wpis
  </h2>
  <div class="card p-3 col-12 col-sm-10 col-md-8 col-lg-6 mx-auto">
      <p class="text-center mb-4">
        Możesz wygenerować wiadomość wykorzystując domyślny prompt lub podać własny
      </p>

      <form class="d-flex flex-column align-items-center " (ngSubmit)="onSubmit()">

        <p class="text-center">Domyślny prompt:</p>
        <div class="w-75 mb-3 p-3 border rounded" style="background-color: #f8f9fa;">
          <p class="m-0 fst-italic text-muted" style="font-size: 0.85rem; line-height: 1.4;">
            "Zawrzyj kilka krótkich, praktycznych porad wspierających dobre samopoczucie i kondycję psychiczną (np. odpoczynek, kontakt z bliskimi, ruch, medytacja, mindfulness). Zakończ tekst życzliwym przesłaniem i motywacją. Nie wymieniaj usług kliniki, ale subtelnie zachęć do zapoznania się z jej ofertą."
          </p>
        </div>
        <div class="mb-2 w-75">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Prompt</mat-label>
            <textarea
              id="email-aurorum-recovery"
              matInput
              rows="4"
              cdkTextareaAutosize
              cdkAutosizeMinRows="3"
              cdkAutosizeMaxRows="6"
              [formControl]="promptForm"
            ></textarea>
            @if (promptForm.invalid) {
              <mat-error>{{ getErrorMessage(promptForm) }}</mat-error>
            }
          </mat-form-field>
        </div>
        <div class="mb-2 w-75">
          <p class="text-danger text-center">UWAGA!<br>Generowanie wpisu może trochę potrwać,<br>nie przejmuj się długim czekaniem.</p>
        </div>
        <app-alert class="mt-3 w-75" *ngIf="message()" [text]="message()"></app-alert>

        <div class="row w-100" [class]="message() ? 'mb-3' : 'mt-3 mb-3'">
          <div class="col-sm text-center">
            <button
              mat-flat-button
              type="button"
              class="btn border w-50"
              style="background-color: white; color: black"
              routerLink="/internal/newsletter"
            >Anuluj</button>
          </div>
          <div class="col-sm text-center">
            <button
              mat-flat-button
              type="submit"
              [disabled]="promptForm.invalid"
              class="btn text-white w-50"
              style="background-color: var(--primary-purple)"
            >Wygeneruj</button>
          </div>
        </div>

      </form>
  </div>
</div>
