<div class="container-fluid pt-3">
  <h2 class="text-center mb-4">Panel wizyt</h2>
  <div class="row">

    <div class="col-12 col-md-5 col-lg-4 pt-5">
      <h5 class="mb-3 text-center">Wyb√≥r dnia</h5>

      <div class="custom-calendar-wrapper">
        <div class="card p-3 w-100 rounded-2 border">
          <mat-calendar
            [selected]="selectedDate()"
            (selectedChange)="onDateChange($event)">
          </mat-calendar>
        </div>
      </div>
    </div>

    <div class="col-12 col-md-7 col-lg-8 d-flex flex-column pt-5">
      <h5 class="mb-3 text-center">Zaplanowane wizyty w wybranym dniu</h5>

      @if (appointments().length > 0) {
        @if (isEmployeeOrAdmin$ | async) {
          <div class="flex-grow-1">
            <app-patient-card
              *ngFor="let app of appointments()"
              [id]="app.id"
              [name]="app.patient.name"
              [surname]="app.patient.surname"
              [visitName]="app.service.name"
              [date]="app.startedAt"
              [phoneNumber]="app.patient.phoneNumber"
              [email]="app.patient.email"
              [doctor]="app.doctor"
              [mode]="'collision'"
            />
          </div>
        } @else {
          <div class="flex-grow-1">
            <app-patient-card
              *ngFor="let app of appointments()"
              [id]="app.id"
              [name]="app.patient.name"
              [surname]="app.patient.surname"
              [visitName]="app.service.name"
              [date]="app.startedAt"
              [phoneNumber]="app.patient.phoneNumber"
              [email]="app.patient.email"
              [mode]="'profileDoctor'"
            />
          </div>
        }

        <div class="mt-3">
          <mat-paginator
            [length]="totalElements()"
            [pageSize]="pageSize()"
            [pageIndex]="currentPage()"
            [hidePageSize]="true"
            (page)="onPageChange($event)"
          ></mat-paginator>
        </div>
      } @else {
        <div class="text-center py-5">
          <p class="text-muted fs-5">Brak wizyt w dniu dzisiejszym</p>
        </div>
      }
      <app-alert *ngIf="infoMessage()" [text]="infoMessage()" />
    </div>

  </div>
</div>
